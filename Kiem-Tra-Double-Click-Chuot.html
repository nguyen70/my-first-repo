<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kiểm Tra Double Click Chuột</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        .click-area {
            transition: all 0.2s ease;
        }
        .click-area:active {
            transform: scale(0.98);
        }
        .single-click {
            background-color: #3b82f6;
        }
        .double-click {
            background-color: #10b981;
        }
        .tooltip {
            position: relative;
        }
        .tooltip .tooltip-text {
            visibility: hidden;
            width: 200px;
            background-color: black;
            color: white;
            text-align: center;
            border-radius: 6px;
            padding: 5px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            transform: translateX(-50%);
            opacity: 0;
            transition: opacity 0.3s;
        }
        .tooltip:hover .tooltip-text {
            visibility: visible;
            opacity: 1;
        }
        .progress-bar {
            transition: width 0.3s ease;
        }
        @keyframes fadeOut {
            from { opacity: 1; }
            to { opacity: 0; }
        }
        .fade-out {
            animation: fadeOut 0.5s forwards;
        }
    </style>
</head>
<body class="bg-gray-100 min-h-screen font-sans">
    <div class="container mx-auto px-4 py-8 max-w-4xl">
        <!-- Header -->
        <header class="text-center mb-8">
            <h1 class="text-3xl md:text-4xl font-bold text-blue-700 mb-2">Kiểm Tra Double Click Chuột</h1>
            <p class="text-gray-600">Ứng dụng giúp bạn kiểm tra và cải thiện kỹ năng double click chuột</p>
        </header>

        <div class="bg-white rounded-xl shadow-lg overflow-hidden mb-8">
            <!-- Click Area -->
            <div class="relative p-4 bg-gray-50 border-b select-none">
                <div id="clickArea" class="click-area bg-blue-100 rounded-lg h-64 md:h-80 flex flex-col items-center justify-center cursor-pointer">
                    <i class="fas fa-mouse text-4xl md:text-5xl text-blue-500 mb-4"></i>
                    <p class="text-xl md:text-2xl font-semibold text-blue-700">Click hoặc Double Click vào đây</p>
                    <p class="text-gray-500 mt-2">Khoảng thời gian double click: <span id="doubleClickThreshold">100</span>ms</p>
                </div>
                
                <!-- Click Indicator -->
                <div id="clickIndicator" class="absolute hidden w-24 h-24 rounded-full bg-blue-400 opacity-0 pointer-events-none"></div>
            </div>

            <!-- Stats & Controls -->
            <div class="p-6">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                    <!-- Stats -->
                    <div>
                        <h2 class="text-xl font-semibold text-gray-800 mb-4">Thống kê</h2>
                        <div class="space-y-3">
                            <div class="flex justify-between">
                                <span class="text-gray-600">Tổng số click:</span>
                                <span id="totalClicks" class="font-medium">0</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-600">Single click:</span>
                                <span id="singleClicks" class="font-medium text-blue-600">0</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-600">Double click:</span>
                                <span id="doubleClicks" class="font-medium text-green-600">0</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-600">Tốc độ double click (ms):</span>
                                <span id="clickSpeed" class="font-medium">0</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-600">Tốc độ nhanh nhất (ms):</span>
                                <span id="fastestClick" class="font-medium">0</span>
                            </div>
                        </div>
                    </div>

                    <!-- Settings -->
                    <div>
                        <h2 class="text-xl font-semibold text-gray-800 mb-4">Cài đặt</h2>
                        <div class="space-y-4">
                            <div>
                                <label for="thresholdSlider" class="block text-gray-700 mb-2">Ngưỡng double click (ms): <span id="thresholdValue">100</span></label>
                                <input id="thresholdSlider" type="range" min="100" max="1000" step="50" value="100" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer">
                                <div class="flex justify-between text-xs text-gray-500 mt-1">
                                    <span>Nhanh</span>
                                    <span>Chậm</span>
                                </div>
                            </div>
                            <div>
                                <label for="clickSound" class="flex items-center cursor-pointer">
                                    <div class="relative">
                                        <input id="clickSound" type="checkbox" class="sr-only" checked>
                                        <div class="block bg-gray-300 w-10 h-6 rounded-full"></div>
                                        <div class="dot absolute left-1 top-1 bg-white w-4 h-4 rounded-full transition"></div>
                                    </div>
                                    <div class="ml-3 text-gray-700">Bật âm thanh khi click</div>
                                </label>
                            </div>
                            <button id="resetStats" class="bg-red-500 hover:bg-red-600 text-white py-2 px-4 rounded-lg flex items-center">
                                <i class="fas fa-redo-alt mr-2"></i> Đặt lại thống kê
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Progress Bars -->
                <div class="mb-6">
                    <h2 class="text-xl font-semibold text-gray-800 mb-4">Tỷ lệ click</h2>
                    <div class="space-y-2">
                        <div class="flex items-center">
                            <span class="text-gray-600 w-32">Single click:</span>
                            <div class="h-4 bg-gray-200 rounded-full flex-grow">
                                <div id="singleClickBar" class="h-full bg-blue-500 rounded-full progress-bar" style="width: 0%"></div>
                            </div>
                            <span id="singleClickPercent" class="ml-2 text-gray-600 w-12">0%</span>
                        </div>
                        <div class="flex items-center">
                            <span class="text-gray-600 w-32">Double click:</span>
                            <div class="h-4 bg-gray-200 rounded-full flex-grow">
                                <div id="doubleClickBar" class="h-full bg-green-500 rounded-full progress-bar" style="width: 0%"></div>
                            </div>
                            <span id="doubleClickPercent" class="ml-2 text-gray-600 w-12">0%</span>
                        </div>
                    </div>
                </div>

                <!-- Instructions -->
                <div class="bg-blue-50 p-4 rounded-lg">
                    <h3 class="font-semibold text-blue-800 mb-2">Hướng dẫn sử dụng:</h3>
                    <ul class="list-disc list-inside text-blue-700 space-y-1">
                        <li>Click hoặc double click vào vùng màu xanh phía trên</li>
                        <li>Double click là hai click được thực hiện trong khoảng thời gian ngắn (thường dưới 100ms)</li>
                        <li>Điều chỉnh thanh trượt để thay đổi độ nhạy của double click</li>
                        <li>Theo dõi thống kê và cải thiện tốc độ double click của bạn</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <footer class="text-center text-gray-500 text-sm mt-8">
            <p>Ứng dụng kiểm tra double click chuột | Free All</p>
        </footer>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Elements
            const clickArea = document.getElementById('clickArea');
            const clickIndicator = document.getElementById('clickIndicator');
            const totalClicksElement = document.getElementById('totalClicks');
            const singleClicksElement = document.getElementById('singleClicks');
            const doubleClicksElement = document.getElementById('doubleClicks');
            const clickSpeedElement = document.getElementById('clickSpeed');
            const fastestClickElement = document.getElementById('fastestClick');
            const thresholdSlider = document.getElementById('thresholdSlider');
            const thresholdValue = document.getElementById('thresholdValue');
            const doubleClickThreshold = document.getElementById('doubleClickThreshold');
            const resetStatsButton = document.getElementById('resetStats');
            const clickSound = document.getElementById('clickSound');
            const singleClickBar = document.getElementById('singleClickBar');
            const doubleClickBar = document.getElementById('doubleClickBar');
            const singleClickPercent = document.getElementById('singleClickPercent');
            const doubleClickPercent = document.getElementById('doubleClickPercent');
            
            // Variables
            let clickCount = 0;
            let singleClickCount = 0;
            let doubleClickCount = 0;
            let lastClickTime = 0;
            let fastestDoubleClick = 0;
            let threshold = 100;
            
            // Audio context for click sounds
            let audioContext;
            try {
                audioContext = new (window.AudioContext || window.webkitAudioContext)();
            } catch (e) {
                console.log('Web Audio API is not supported in this browser');
            }
            
            // Play click sound
            function playClickSound(frequency = 800, duration = 0.1) {
                if (!clickSound.checked || !audioContext) return;
                
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                
                oscillator.frequency.value = frequency;
                gainNode.gain.value = 0.3;
                
                oscillator.start();
                gainNode.gain.exponentialRampToValueAtTime(0.00001, audioContext.currentTime + duration);
                
                oscillator.stop(audioContext.currentTime + duration);
            }
            
            // Show click indicator
            function showClickIndicator(x, y, isDoubleClick = false) {
                clickIndicator.style.left = `${x - 48}px`;
                clickIndicator.style.top = `${y - 48}px`;
                clickIndicator.style.backgroundColor = isDoubleClick ? '#10b981' : '#3b82f6';
                clickIndicator.classList.remove('hidden');
                clickIndicator.classList.remove('fade-out');
                
                // Trigger reflow
                void clickIndicator.offsetWidth;
                
                clickIndicator.classList.add('fade-out');
                
                setTimeout(() => {
                    clickIndicator.classList.add('hidden');
                }, 500);
            }
            
            // Update progress bars
            function updateProgressBars() {
                const total = singleClickCount + doubleClickCount;
                if (total === 0) {
                    singleClickBar.style.width = '0%';
                    doubleClickBar.style.width = '0%';
                    singleClickPercent.textContent = '0%';
                    doubleClickPercent.textContent = '0%';
                    return;
                }
                
                const singleClickPercentage = (singleClickCount / total) * 100;
                const doubleClickPercentage = (doubleClickCount / total) * 100;
                
                singleClickBar.style.width = `${singleClickPercentage}%`;
                doubleClickBar.style.width = `${doubleClickPercentage}%`;
                
                singleClickPercent.textContent = `${Math.round(singleClickPercentage)}%`;
                doubleClickPercent.textContent = `${Math.round(doubleClickPercentage)}%`;
            }
            
            // Handle click events
            clickArea.addEventListener('click', function(e) {
                clickCount++;
                totalClicksElement.textContent = clickCount;
                
                const currentTime = new Date().getTime();
                const timeSinceLastClick = currentTime - lastClickTime;
                
                // Show click indicator
                showClickIndicator(e.clientX, e.clientY, false);
                
                // Check if it's a double click
                if (timeSinceLastClick > 0 && timeSinceLastClick < threshold) {
                    // It's a double click
                    doubleClickCount++;
                    doubleClicksElement.textContent = doubleClickCount;
                    clickSpeedElement.textContent = timeSinceLastClick;
                    
                    // Update fastest double click
                    if (fastestDoubleClick === 0 || timeSinceLastClick < fastestDoubleClick) {
                        fastestDoubleClick = timeSinceLastClick;
                        fastestClickElement.textContent = fastestDoubleClick;
                    }
                    
                    // Visual feedback for double click
                    clickArea.classList.remove('single-click');
                    clickArea.classList.add('double-click');
                    setTimeout(() => {
                        clickArea.classList.remove('double-click');
                    }, 300);
                    
                    // Play double click sound
                    playClickSound(600, 0.15);
                    
                    // Show double click indicator
                    showClickIndicator(e.clientX, e.clientY, true);
                } else {
                    // It's a single click
                    singleClickCount++;
                    singleClicksElement.textContent = singleClickCount;
                    
                    // Visual feedback for single click
                    clickArea.classList.add('single-click');
                    setTimeout(() => {
                        clickArea.classList.remove('single-click');
                    }, 300);
                    
                    // Play single click sound
                    playClickSound(400, 0.1);
                }
                
                lastClickTime = currentTime;
                updateProgressBars();
            });
            
            // Update threshold value from slider
            thresholdSlider.addEventListener('input', function() {
                threshold = parseInt(this.value);
                thresholdValue.textContent = threshold;
                doubleClickThreshold.textContent = threshold;
            });
            
            // Reset statistics
            resetStatsButton.addEventListener('click', function() {
                clickCount = 0;
                singleClickCount = 0;
                doubleClickCount = 0;
                lastClickTime = 0;
                fastestDoubleClick = 0;
                
                totalClicksElement.textContent = '0';
                singleClicksElement.textContent = '0';
                doubleClicksElement.textContent = '0';
                clickSpeedElement.textContent = '0';
                fastestClickElement.textContent = '0';
                
                updateProgressBars();
            });
            
            // Initialize tooltips
            const tooltipElements = document.querySelectorAll('.tooltip');
            tooltipElements.forEach(el => {
                el.addEventListener('mouseenter', function() {
                    const tooltipText = this.querySelector('.tooltip-text');
                    if (tooltipText) {
                        tooltipText.style.visibility = 'visible';
                        tooltipText.style.opacity = '1';
                    }
                });
                
                el.addEventListener('mouseleave', function() {
                    const tooltipText = this.querySelector('.tooltip-text');
                    if (tooltipText) {
                        tooltipText.style.visibility = 'hidden';
                        tooltipText.style.opacity = '0';
                    }
                });
            });
        });
    </script>
</body>
</html>